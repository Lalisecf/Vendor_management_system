<div class="row">
    <div class="col-12">
        <div class="page-title-box">
            <app-navigator-upper></app-navigator-upper>
            <h4 class="page-title">Licences</h4>
            <div class="card">
                <div class="card-body">
                    <h4 class="header-title">List of Licences</h4>
                    <div class="continer mb-4">
                        <div class="row">
                            <div class="row d-flex justify-content-end">
                                <button id="reset_button" class="btn btn-primary" style="width: fit-content"
                                    (click)="clearAllSearches()">
                                    Reset
                                </button>&nbsp;&nbsp;&nbsp;&nbsp;
                                <!-- <button class="btn btn-secondary" style="width: fit-content" (click)="reload()">
                    Reload
                  </button>&nbsp;&nbsp;&nbsp;&nbsp; -->
                                <button *ngIf="role_name=='Maker'" class="btn btn-primary" style="width: fit-content"
                                    (click)="goToPage('add-licence')">
                                    Register New Licence
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="row">
                            <table datatable [dtOptions]="dtOptions" id="licence_table"
                                class="table dt-responsive nowrap w-100">

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="detail_history_modal" class="modal fade" data-bs-backdrop="static" data-keyboard="false" tabindex="-1"
    role="dialog" aria-labelledby="detail_transaction_modalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">

        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="detail_transaction_modalLabel">View detail history of licence id
                    {{licence_id}}.
                </h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
            </div>
            <div class="d-none" id="lalksdf6a5s4d6ffas"></div>
            <div class="row" style="padding-left: 3%; padding-right: 3%;">
                <table datatable [dtOptions]="dtOptions_deatil_history" id="view_detail_licence_history"
                    class="table table-bordered dt-responsive w-100">

                </table>
            </div>
            <br>
            <!-- <div style="text-align: center;" *ngFor="let reas of reasonEditDelete" id="cleardata">
          <p><span><b>Reason : </b> {{reas.reason}}</span>,&nbsp;&nbsp;&nbsp;
            <span><b>Action By : </b> {{reas.by}}</span>,&nbsp;&nbsp;&nbsp;
            <span><b>Date : </b> {{reas.date}}</span>
          </p>
        </div> -->


            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>

    </div>
</div>
<div id="reason_modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" data-bs-backdrop="static"
    data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Please enter title and description of {{reason}} reason
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <form class="ps-3 pe-3" (ngSubmit)="onSubmitReason()" [formGroup]="reasonForm">
                    <div class="mb-3">
                        <label for="title" class="form-label">Title</label>
                        <input class="form-control" type="text" id="title" placeholder="Title" formControlName="title"
                            autocomplete="off">
                        <div class="valid-feedback" *ngIf="
                  submitted && reasonForm.controls['title'].valid
                ">
                            Looks good!
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && reasonForm.controls['title'].errors?.['required']">
                            Please enter title.
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && reasonForm.controls['title'].errors?.['minlength']">
                            At least 2 Characters.
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && reasonForm.controls['title'].errors?.['maxlength']">
                            At most 30 Characters.
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <quill-editor class="form-control" type="text" id="description" placeholder="Description"
                            formControlName="description"></quill-editor>
                        <div class="valid-feedback" *ngIf="submitted && reasonForm.controls['description'].valid">
                            Looks good!
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && reasonForm.controls['description'].errors?.['required']">
                            Please enter description for {{reason}} reason.
                        </div>
                    </div>
                    <div class="mb-3 text-center modal-footer">
                        <button class="btn btn-primary" type="submit">Submit</button>
                    </div>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<div id="reject-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" data-bs-backdrop="static"
    data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Please enter title and description of rejecting reason
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <form class="ps-3 pe-3" (ngSubmit)="onSubmit()" [formGroup]="registerForm">
                    <div class="mb-3">
                        <label for="title" class="form-label">Title</label>
                        <input class="form-control" type="text" id="title" placeholder="Title" formControlName="title"
                            autocomplete="off">
                        <div class="valid-feedback" *ngIf="
                  submitted && registerForm.controls['title'].valid
                ">
                            Looks good!
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && registerForm.controls['title'].errors?.['required']">
                            Please enter title.
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && registerForm.controls['title'].errors?.['minlength']">
                            At least 2 Characters.
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && registerForm.controls['title'].errors?.['maxlength']">
                            At most 30 Characters.
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <quill-editor class="form-control" type="text" id="description" placeholder="Description"
                            formControlName="description"></quill-editor>
                        <div class="valid-feedback" *ngIf="submitted && registerForm.controls['description'].valid">
                            Looks good!
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && registerForm.controls['description'].errors?.['required']">
                            Please enter description for rejecting reason.
                        </div>
                    </div>
                    <div class="mb-3 text-center modal-footer">
                        <button class="btn btn-primary" type="submit">Submit</button>
                    </div>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<div id="view_remark_modal" class="modal fade" data-bs-backdrop="static" data-keyboard="false" tabindex="-1"
    role="dialog" aria-labelledby="view_remark_modalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">

        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="view_remark_modalLabel"
                    style="color:black;font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;">
                    <i class="uil-comments text-primary">View Remarks</i>
                </h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
            </div>
            <div class="row"></div>
            <div style="margin-left:5%;margin-right:5%;">
                <table datatable [dtOptions]="dtOptions_view_remarks" id="view_pool_remark"
                    class="table table-bordered dt-responsive nowrap w-100">
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>

    </div>
</div>
<div id="edit_modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" data-bs-backdrop="static"
    data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered modal-lg" style="width:auto;">
        <div class="modal-content" style="width: max-content;">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"> If you want to manage your coment,You can possible use
                    blow
                    options.</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <form class="ps-3 pe-3" [formGroup]="editForm">
                    <div class="mb-3">
                        <label for="title" class="form-label">Title</label>
                        <input class="form-control" type="text" id="title" placeholder="Title" formControlName="title"
                            [(ngModel)]="remark.title" autocomplete="off">
                        <div class="valid-feedback" *ngIf="
                  submitted && editForm.controls['title'].valid
                ">
                            Looks good!
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && editForm.controls['title'].errors?.['required']">
                            Please enter title.
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && editForm.controls['title'].errors?.['minlength']">
                            At least 2 Characters.
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && editForm.controls['title'].errors?.['maxlength']">
                            At most 30 Characters.
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <quill-editor class="form-control" type="text" id="description" placeholder="Description"
                            formControlName="description" [(ngModel)]="remark.description"></quill-editor>
                        <div class="valid-feedback" *ngIf="submitted && editForm.controls['description'].valid">
                            Looks good!
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="submitted && editForm.controls['description'].errors?.['required']">
                            Please enter description for rejecting reason.
                        </div>
                    </div>
                    <div class="mb-3 text-center modal-footer">
                        <button class="btn btn-primary" type="submit" (click)="delete()">Delete</button>
                        <button class="btn btn-primary" type="submit" (click)="update()">Edit</button>
                    </div>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<swal #SwalSessionExpired title="Warning" text="Your session has expired! please login to continue." icon="warning"
    [showCancelButton]="false" [showConfirmButton]="false" [timer]="3500" [focusCancel]="true">
</swal>